<div class="layout" *ngIf="authService.isLoggedIn(); else loginView">
  <!-- âœ… Moved *ngIf to the outermost layout container 
       so the entire dashboard (sidebar + top bar) only shows after login -->

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">ğŸ’° ExpenseHub</div>

    <!-- âœ… Removed *ngIf from nav-menu (since applied on parent div) -->
    <nav class="nav-menu">
      <a class="nav-link" routerLink="/home" routerLinkActive="active">ğŸ  Dashboard</a>
      <a class="nav-link" routerLink="/expenses" routerLinkActive="active">ğŸ’¸ Expenses</a>
      <a class="nav-link" routerLink="/categories" routerLinkActive="active">ğŸ“‚ Categories</a>
      <a class="nav-link" routerLink="/employees" routerLinkActive="active">ğŸ‘¥ Employees</a>
      <a class="nav-link" routerLink="/departments" routerLinkActive="active">ğŸ¬ Departments</a>
      <a class="nav-link" routerLink="/approvals" routerLinkActive="active">ğŸ“ Approvals</a>
      <a class="nav-link" routerLink="/settings/roles-permissions" routerLinkActive="active">
        ğŸ” Roles & Permissions
      </a>
      <a class="nav-link" routerLink="/reports" routerLinkActive="active">ğŸ“Š Reports</a>
      <a class="nav-link" routerLink="/settings/reimbursement" routerLinkActive="active">
        ğŸ¦ Reimbursement / Payment
      </a>
      <a class="nav-link" routerLink="/settings" routerLinkActive="active">âš™ï¸ Settings</a>

      <!-- âœ… Added logout button -->
      <a class="nav-link" (click)="logout()">ğŸšª Logout</a>
    </nav>

    <div class="version">
      <p>Version 2.1.0</p>
      <p>&copy; 2025 ExpenseHub</p>
    </div>
  </aside>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Top Navbar -->
    <header class="top-navbar">
      <input
        type="text"
        class="search-input"
        placeholder="ğŸ” Search expenses, employees, or requests..."
      />
      <div class="user-actions">
        <div class="notification-bell">
          ğŸ””
          <span class="badge">3</span>
        </div>
        <div class="user-profile">
          <span class="role">{{ authService.getUser()?.firstName || 'User' }}</span>
          <span class="dropdown">â–¼</span>
        </div>
      </div>
    </header>

    <!-- Router outlet -->
    <main class="dashboard-placeholder">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>

<!-- âœ… Added fallback for when user is not logged in -->
<ng-template #loginView>
  <router-outlet></router-outlet>
</ng-template>
