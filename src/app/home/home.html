<div class="body">
  
  <div class="dashboard">
    <header class="overview section">
      <h1>Welcome to Expense Dashboard </h1>
      <p>Monitor and manage your organization's expenses</p>
    </header>

    <section class="stats-grid section">
      <div class="stat-card">
        <h3>This Month Expenses</h3>
        <div class="stat-value">{{ thisMonthExpenses | currency:'USD' }}</div>
        <div class="stat-subtext">+12.5% from last month</div>
      </div>
      <div class="stat-card">
        <h3>Pending Requests</h3>
        <div class="stat-value">{{ pendingRequests || 0 }}</div>
        <div class="stat-subtext">Awaiting approval</div>
      </div>
      <div class="stat-card">
  <h3>Approved This Week</h3>
  <div class="stat-value">
    ${{ stats()?.approvedThisWeekAmount || 0 | number:'1.0-0' }}
  </div>
  <div class="stat-subtext">
    {{ stats()?.approvedThisWeekCount || 0 }} requests approved
  </div>
</div>

<div class="stat-card">
  <h3>Budget Remaining</h3>
  <div class="stat-value">
    ${{ stats()?.remainingAmount || 0 | number:'1.0-0' }}
  </div>
  <div class="stat-subtext">
    of ${{ stats()?.totalBudget || 0 | number:'1.0-0' }} total budget
  </div>
</div>
</section>

<section class="recent-requests section">
  <h2>Recent Requests</h2>
  <p>Expense requests from employees</p>

  <div class="requests-container">
    <div class="request-card" *ngFor="let req of recentRequests">
      <h3>{{ req.employeeName }}</h3>
      <p>Expense Type: {{ req.expenseTypeName }} â€¢ {{ req.date | date:'yyyy-MM-dd' }}</p>
      <p>{{ req.amount | currency:'USD' }}</p>
      <span class="status">{{ req.status }}</span>
    </div>
  </div>
</section>



    <section class="quick-approvals section">
      <h2>Quick Approvals</h2>
      <p>Review and approve pending requests</p>

      <div class="approval-item" *ngFor="let request of pendingRequestsList">
        <div class="approval-info">
      <strong>{{ request.employeeName }}</strong> |
      {{ request.expenseType }} |
      {{ request.date | date:'shortDate' }} |
      ${{ request.amount }}
    </div>
        <div class="approval-buttons">  
          <button class="approve" (click)="approveRequest(request)">Approve</button>
          <button class="reject" (click)="rejectRequest(request)">Reject</button>
        </div>
      </div>
    </section>

    <section class="expense-analysis section">
      <h2>Expense Analysis</h2>
      <p>Monthly expense trends and approvals</p>
      <div class="bar-chart" aria-label="Monthly expense trends and approvals chart" role="img">
        <div class="bar" style="height: 150px;">
          <div class="bar-tooltip">$30,000 Total</div>
        </div>
        <div class="bar approved" style="height: 100px;">
          <div class="bar-tooltip">$20,000 Approved</div>
        </div>
        <div class="bar" style="height: 170px;">
          <div class="bar-tooltip">$34,000 Total</div>
        </div>
        <div class="bar approved" style="height: 110px;">
          <div class="bar-tooltip">$22,000 Approved</div>
        </div>
        <div class="bar" style="height: 130px;">
          <div class="bar-tooltip">$26,000 Total</div>
        </div>
        <div class="bar approved" style="height: 90px;">
          <div class="bar-tooltip">$18,000 Approved</div>
        </div>
      </div>
      <div class="chart-labels">
        <span>Jan</span><span>Feb</span><span>Mar</span><span>Apr</span><span>May</span><span>Jun</span>
      </div>
    </section>

    <section class="audit-log section">
      <h2>Audit Log</h2>
      <p>Track all expense-related activities</p>

      <table class="audit-log">
        <thead>
          <tr>
            <th>Action</th>
            <th>User</th>
            <th>Amount</th>
            <th>Date &amp; Time</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let log of auditLogs">
            <td>{{ log.action }}</td> 
            <td>{{ log.actionById }}</td> 
            <td>{{ log.amount ? ('$' + log.amount) : '-' }}</td>
            <td>{{ log.actionDate | date:'yyyy-MM-dd HH:mm' }}</td> 
            <td [ngClass]="{
                  'status-approved': log.status === 'approved',
                  'status-rejected': log.status === 'rejected',
                  'status-submitted': log.status === 'submitted',
                  'status-updated': log.status === 'updated'
                }">{{ log.status }}</td> 
          </tr>
        </tbody>
      </table>
    </section>


