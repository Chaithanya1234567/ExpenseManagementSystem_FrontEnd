<section class="payments section">
  <div class="header">
    <h2>ðŸ’³ Payment Processing</h2>
    <p>Manage and process approved expense payments</p>
  </div>

  <p *ngIf="message" class="alert success">{{ message }}</p>

  <div *ngIf="loading" class="loading">
    <div class="spinner"></div> Loading approved expenses...
  </div>

  <div class="table-wrapper" *ngIf="!loading && approvedExpenses.length > 0">
    <table class="payment-table">
      <thead>
        <tr>
          <th>Expense ID</th>
          <th>Employee</th>
          <th>Expense Type</th>
          <th>Amount</th>
          <th>Status</th>
          <th>Payment Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let exp of approvedExpenses">
          <td>#{{ exp.expenseId }}</td>
          <td>{{ exp.employeeName }}</td>
          <td>{{ exp.expenseTypeName }}</td>
          <td>{{ exp.amount | currency:'INR' }}</td>
          <td>
            <span class="badge" [ngClass]="exp.status.toLowerCase()">{{ exp.status }}</span>
          </td>
          <td>
            <span class="badge" [ngClass]="exp.paymentStatus.toLowerCase()">{{ exp.paymentStatus }}</span>
          </td>
          <td>
            <button 
              *ngIf="exp.paymentStatus !== 'Paid'"
              (click)="markAsPaid(exp)"
              class="btn btn-primary">
              ðŸ’° Mark as Paid
            </button>
            <span *ngIf="exp.paymentStatus === 'Paid'" class="paid-text">âœ… Paid</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <p *ngIf="!loading && approvedExpenses.length === 0" class="no-data">
    ðŸ’¤ No approved expenses awaiting payment.
  </p>
</section>
